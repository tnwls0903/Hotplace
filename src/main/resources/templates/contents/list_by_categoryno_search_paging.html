<!DOCTYPE html>
<html layout:decorate="~{layout}">

<head>
  <style>
    .title_line {
      margin-bottom: 20px;
    }

    .title_line_text {
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }

    .aside_right {
      text-align: right;
      margin-bottom: 20px;
    }

    .aside_right a {
      text-decoration: none;
      color: #007bff;
      margin: 0 10px;
    }

    .menu_divide {
      margin: 0 5px;
      color: #333;
    }

    .menu_line {
      height: 1px;
      background-color: #ddd;
      margin-bottom: 20px;
    }

    .card {
      display: flex;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 20px;
      overflow: hidden;
      cursor: pointer;
      height: 120px; /* 카드 높이를 120px로 조정 */
    }

    .card img {
      flex: 0 0 90px; /* 이미지 너비를 90px로 조정 */
      height: 100%;
      object-fit: cover;
    }

    .card-content {
      flex: 1;
      padding: 10px 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .card-content span {
      display: block;
    }

    .card-content .title {
      font-weight: bold;
    }

    .card-content .date {
      color: #888;
    }

    .bottom_menu {
      margin-top: 20px;
      text-align: center;
    }

    .no-content {
      text-align: center;
      padding: 50px 0;
      font-size: 20px;
    }
  </style>
</head>

<body>

  <div layout:fragment="content">

    <div class='title_line'>
      <span class="title_line_text" th:text="${categoryVO.name}"></span>
      > <span class="title_line_text" th:text="${categoryVO.namesub}"></span>
      <span class="title_line_text" th:if="${word != ''}" th:text="|> ${word} (${search_count} 건)|"></span>
    </div>
  
    <aside class="aside_right">
      <a href="javascript:location.reload();">새로고침</a>
      <span class='menu_divide'>│</span>
    
      <span th:if="${session.grade == 'admin' || session.grade == 'member'}">
        <a th:href="@{|/contents/create?categoryno=${categoryVO.categoryno}|}">등록</a>
        <span class="menu_devide">│</span>
      </span>

      <a
        th:href="@{|./list_by_categoryno_grid?categoryno=${categoryVO.categoryno}&word=${word }&now_page=${now_page}|}">갤러리형</a>
    </aside>

    <div class='menu_line'></div>

    <div th:if="${list.size() > 0}">
      <div th:each="contentsVO, status:${list}" class="card"
        th:attr="onclick=|location.href='/contents/read?contentsno=${contentsVO.contentsno}&word=${word}&now_page=${now_page}'|">

        <div
          th:if="${((contentsVO.file1.endsWith('jpg') or contentsVO.file1.endsWith('png') or contentsVO.file1.endsWith('gif')) == false) and (contentsVO.size1 > 0)}"
          style="flex: 0 0 90px; height: 120px; display: flex; justify-content: center; align-items: center;">
          <span th:text="${contentsVO.file1}"></span>
        </div>

        <div class="card-content">
          <span class="title" th:text="${contentsVO.title}"></span>
          <span class="date" th:text="|&nbsp;${contentsVO.rdate.substring(0,10)}|"></span>
          <span th:if="${contentsVO.content.length() > 160 }" th:text="|${contentsVO.content.substring(0, 160) }...|"></span>
          <span th:if="${contentsVO.content.length() <= 160 }" th:text="|${contentsVO.content}|"></span>
        </div>
      </div>
    </div>

    <div th:if="${list.size() == 0}" class="no-content">
      관련 게시글이 없습니다.
    </div>

    <div class='bottom_menu'>
      <button type='button' onclick="location.reload();" class="btn btn-primary btn-sm">새로 고침</button>
    </div>

  </div>

</body>

</html>
